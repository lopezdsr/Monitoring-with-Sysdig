---

copyright:
  years:  2020
lastupdated: "2020-10-15"

keywords: Sysdig, IBM Cloud, monitoring, api token

subcollection: Monitoring-with-Sysdig

---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:pre: .pre}
{:table: .aria-labeledby="caption"}
{:codeblock: .codeblock}
{:tip: .tip}
{:download: .download}
{:important: .important}
{:note: .note}
{:external: target="_blank" .external}

# Using IAM API tokens to authenticate Sysdig services

IBM Cloud users and service ID can use IAM tokens to authenticate with Sysdig services while using Python scripts or the Sysdig REST API to automate routine monitoring tasks, such as creating Dashboards or creating alerts.

## Prerequisites

Complete the tasks listed in the following:
* [Working with API tokens](https://cloud.ibm.com/docs/Monitoring-with-Sysdig?topic=Monitoring-with-Sysdig-api_token)
* [Granting permissions to launch the Sysdig UI or to make REST API calls](https://cloud.ibm.com/docs/Monitoring-with-Sysdig?topic=Monitoring-with-Sysdig-iam_grant)
* Sysdig team ID. See [getting-the-sysdig-team-ID]

## HTTP authorization request headers

* **Authorization**: The IBM IAM bearer token.
* **IBMInstanceID**: The unique ID of the Sysdig service.
* **SysdigTeamID**: The unique identification code for the Sysdig team that the user part of. Team ID is optional. Specifying a team ID overrides the sysdig default team that the user automatically launched into.


## Getting the Sysdig team ID

### Example request

Here is an example POST (using cURL) command to get a list of teams and their IDs for the authorized user:

```
curl -v -H "Authorization: Bearer IBM_IAM_TOKEN_HERE"   -H "IBMInstanceID: INSTANCE_ID_HERE"   https://eu-gb.monitoring.test.cloud.ibm.com/api/teams

```

### Example responses

```
{
  "teams": [
    {
      "description": "Immutable Monitor team with full visibility",
      "version": 0,
      "name": "Monitor Operations",
      "properties": {},
      "id": 1478,
      "default": true,
      "origin": "SYSDIG",
      "dateCreated": 1602710062000,
      "entryPoint": {
        "module": "Explore"
      },
      "show": "host",
      "customerId": 1566,
      "products": [
        "SDC"
      ],
      "theme": "#7BB0B2",
      "lastUpdated": 1602710062000,
      "defaultTeamRole": "ROLE_TEAM_EDIT",
      "namespaceFilters": {},
      "immutable": true,
      "canUseSysdigCapture": true,
      "userCount": 1,
      "canUseCustomEvents": true,
      "canUseAwsMetrics": true,
      "canUseBeaconMetrics": true
    },
    {
      "description": "",
      "version": 0,
      "name": "TestTeam1",
      "properties": {},
      "id": 1489,
      "default": false,
      "origin": "SYSDIG",
      "dateCreated": 1602710654000,
      "entryPoint": {
        "module": "Explore"
      },
      "show": "host",
      "customerId": 1566,
      "products": [
        "SDC"
      ],
      "theme": "#73A1F7",
      "lastUpdated": 1602710654000,
      "defaultTeamRole": "ROLE_TEAM_EDIT",
      "namespaceFilters": {},
      "immutable": false,
      "canUseSysdigCapture": false,
      "userCount": 1,
      "canUseCustomEvents": false,
      "canUseAwsMetrics": false,
      "canUseBeaconMetrics": false
    }
  ]
}
```

## Making data requests

### Example request

Given below is an example POST (using cURL) command for making a data request to get the dashboards associated with a given team:

```
curl -v -H "Authorization: Bearer IBM_IAM_TOKEN_HERE"  -H "IBMInstanceID: INSTANCE_ID_HERE"  -H "SysdigTeamID: SYSDIG_TEAM_ID_HERE"   https://eu-gb.monitoring.test.cloud.ibm.com/api/v3/dashboards
```
### Example response

A redacted example response is given below:

```
{
  "dashboards": [
    {
      "id": 3442,
      "teamId": 1478,
      "userId": 1267,
      "name": "New Dashboard",
      "panels": [
        {
          ...
      ],
      "shared": false,
      "public": false,
      "version": 1,
      "createdOn": 1602710683000,
      "modifiedOn": 1602710683000,
      "description": "",
      "layout": [
        {
          "panelId": 1,
          "x": 0,
          "y": 0,
          "w": 8,
          "h": 8
        }
      ],
      "sharingSettings": [],
      "publicToken": "abc123",
      "favorite": false,
      "schema": 3,
      "username": "User Name (your_name@account.com)",
      "permissions": [
        "dashboards.read",
        "dashboards.sharing",
        "dashboards.delete",
        "dashboards.edit",
        "dashboards.transfer"
      ]
    }
  ]
}
```
